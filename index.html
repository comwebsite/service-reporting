<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Service Reporting</title>
<style>
:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --text:#0b1b2b;
  --muted:#6b7785;
  --accent:#2b7cff;
  --accent-2:#7c5cff;
  --field-h:56px;
  --radius:12px;
  --shadow: 0 10px 30px rgba(15,23,42,0.06);
}
*{box-sizing:border-box;font-family:Inter,Segoe UI,system-ui,Arial; -webkit-font-smoothing:antialiased;}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);}
.wrapper{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;}
.container{width:100%;max-width:720px;background:var(--card);border-radius:16px;padding:22px;border:1px solid rgba(11,27,43,0.04);box-shadow:var(--shadow);}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;gap:12px;}
.title{font-size:20px;font-weight:700;}
.version{font-size:12px;color:var(--muted);background:rgba(43,124,255,0.06);padding:6px 10px;border-radius:999px;border:1px solid rgba(43,124,255,0.08);}
.form-grid{display:flex;flex-direction:column;gap:12px;}
.field{display:flex;flex-direction:column;}
label{font-size:13px;color:var(--muted);margin-bottom:8px;}
.input,select,button{height:var(--field-h);width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(11,27,43,0.06);background:transparent;color:var(--text);font-size:15px;outline:none;transition:all .14s ease;}
.input:focus,select:focus{box-shadow:0 10px 30px rgba(43,124,255,0.08);border-color:var(--accent);}
.row{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;}
.col{flex:1;min-width:180px;}
.picker-wrapper{position:relative;border-radius:10px;overflow:hidden;}
.native-picker{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer;border-radius:inherit;border:none;background:transparent;}
.display-field{pointer-events:none;background:transparent;}
/* hide default spin/clear icons where possible */
input::-webkit-clear-button, input::-webkit-inner-spin-button, input::-webkit-outer-spin-button {display:none;}
input::-ms-clear, input::-ms-expand {display:none;}
.error{color:#d23b3b;font-size:13px;margin-top:6px;opacity:0;transform:translateY(-6px);transition:all .14s;}
.invalid{border-color:#d23b3b !important;box-shadow:0 8px 20px rgba(210,59,59,0.06);}
.shake{animation:shake .36s}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}
/* Submit button improved */
.submit{height:56px;background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:#fff;font-weight:700;border-radius:12px;cursor:pointer;font-size:16px;transition:transform .12s,box-shadow .12s;box-shadow:0 10px 30px rgba(43,124,255,0.12);width:100%;}
.submit:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(43,124,255,0.14);}
.submit:focus{outline:3px solid rgba(43,124,255,0.12);outline-offset:3px;}
.note{font-size:12px;color:var(--muted);margin-top:10px;text-align:center;}
/* responsive */
@media(max-width:640px){
  .row{flex-direction:column;}
  .header{flex-direction:column;align-items:flex-start;gap:8px;}
}
</style>
</head>
<body>
<div class="wrapper">
  <div class="container" role="main" aria-labelledby="formTitle">
    <div class="header">
      <div id="formTitle" class="title">Service Reporting</div>
      <div class="version">version 3.1.1</div>
    </div>

    <form id="reportForm" class="form-grid" action="https://formsubmit.co/communityofdevelopingcraftsmen@gmail.com" method="POST" autocomplete="off" novalidate>
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_subject" value="Service Report">

      <div class="row">
        <div class="col field">
          <label for="dateDisplay">Date</label>
          <div class="picker-wrapper">
            <input id="dateDisplay" class="input display-field" readonly aria-readonly="true" />
            <input id="datePicker" class="native-picker" type="date" name="Date" required />
          </div>
          <div id="dateError" class="error">Пожалуйста, выберите дату</div>
        </div>

        <div class="col field">
          <label for="timeDisplay">Time</label>
          <div class="picker-wrapper">
            <input id="timeDisplay" class="input display-field" readonly aria-readonly="true" />
            <input id="timePicker" class="native-picker" type="time" name="Time" required />
          </div>
          <div id="timeError" class="error">Пожалуйста, выберите время</div>
        </div>
      </div>

      <div class="field">
        <label for="temperature">Temperature</label>
        <input id="temperature" name="Temperature" class="input" placeholder="e.g. 23.5" inputmode="decimal" required />
        <div id="tempError" class="error">Только числа; допустимы . и ,</div>
      </div>

      <div class="field">
        <label for="hours">Working hours</label>
        <input id="hours" name="WorkingHours" class="input" placeholder="e.g. 8 or 8:30" inputmode="numeric" required />
        <div id="hoursError" class="error">Только цифры и двоеточие</div>
      </div>

      <div class="field">
        <label for="helped">How many people have you helped</label>
        <input id="helped" name="Helped" class="input" inputmode="numeric" placeholder="e.g. 3" required />
        <div id="helpedError" class="error">Только целое число</div>
      </div>

      <div class="field">
        <label for="difficulty">Work difficulty</label>
        <select id="difficulty" name="WorkDifficulty" class="input" required>
          <option value="">Выберите</option>
          <option>Neutral</option>
          <option>Easy</option>
          <option>Moderate</option>
          <option>Hard</option>
        </select>
        <div id="diffError" class="error">Выберите уровень</div>
      </div>

      <div class="field">
        <label for="shift">Shift type</label>
        <select id="shift" name="ShiftType" class="input" required>
          <option value="">Выберите</option>
          <option>Day</option>
          <option>Night</option>
        </select>
        <div id="shiftError" class="error">Выберите смену</div>
      </div>

      <div class="field">
        <label for="reported">Reported by</label>
        <input id="reported" name="ReportedBy" class="input" placeholder="Имя" inputmode="text" required />
        <div id="repError" class="error">Введите только имя (латиница или кириллица)</div>
      </div>

      <button type="submit" class="submit">Submit</button>
      <div class="note">by vertex dynamics</div>
    </form>
  </div>
</div>

<script>
/* Formatting helpers */
const pad = n => n.toString().padStart(2,'0');
const formatDate = d => `${pad(d.getDate())}.${pad(d.getMonth()+1)}.${d.getFullYear()}`;
const formatTime = d => `${pad(d.getHours())}:${pad(d.getMinutes())}`;

/* Elements */
const datePicker = document.getElementById('datePicker');
const dateDisplay = document.getElementById('dateDisplay');
const timePicker = document.getElementById('timePicker');
const timeDisplay = document.getElementById('timeDisplay');

document.addEventListener('DOMContentLoaded', () => {
  const now = new Date();
  // set native pickers to now (with fallback)
  try { datePicker.valueAsDate = now; } catch(e){
    const y = now.getFullYear(), m = pad(now.getMonth()+1), d = pad(now.getDate());
    datePicker.value = `${y}-${m}-${d}`;
  }
  timePicker.value = formatTime(now);
  dateDisplay.value = formatDate(now);
  timeDisplay.value = timePicker.value;
});

/* Sync display when native pickers change */
datePicker.addEventListener('input', () => {
  if (!datePicker.value) { dateDisplay.value = ''; return; }
  const parts = datePicker.value.split('-');
  if (parts.length === 3) {
    const [y,m,d] = parts;
    dateDisplay.value = `${pad(Number(d))}.${pad(Number(m))}.${y}`;
  } else {
    dateDisplay.value = datePicker.value;
  }
});
timePicker.addEventListener('input', () => {
  timeDisplay.value = timePicker.value || '';
});

/* Validation */
const form = document.getElementById('reportForm');
const patterns = {
  temp: /^[0-9]+([.,][0-9]+)?$/,
  hours: /^[0-9]+(:[0-9]{1,2})?$/,
  helped: /^\d+$/,
  name: /^[A-Za-zА-Яа-яЁё]+$/
};

function showError(el, msgId){
  const err = document.getElementById(msgId);
  if(err) err.style.opacity = 1;
  el.classList.add('invalid','shake');
  setTimeout(()=>el.classList.remove('shake'),360);
}
function hideError(el,msgId){
  const err = document.getElementById(msgId);
  if(err) err.style.opacity = 0;
  el.classList.remove('invalid');
}

form.addEventListener('submit', (e) => {
  let ok = true;
  // date/time
  if(!datePicker.value){ showError(dateDisplay,'dateError'); ok=false } else hideError(dateDisplay,'dateError');
  if(!timePicker.value){ showError(timeDisplay,'timeError'); ok=false } else hideError(timeDisplay,'timeError');

  // temperature
  const temp = document.getElementById('temperature');
  if(!temp || !patterns.temp.test(temp.value.trim())){ showError(temp,'tempError'); ok=false } else hideError(temp,'tempError');

  // hours
  const hours = document.getElementById('hours');
  if(!hours || !patterns.hours.test(hours.value.trim())){ showError(hours,'hoursError'); ok=false } else hideError(hours,'hoursError');

  // helped
  const helped = document.getElementById('helped');
  if(!helped || !patterns.helped.test(helped.value.trim())){ showError(helped,'helpedError'); ok=false } else hideError(helped,'helpedError');

  // difficulty
  const diff = document.getElementById('difficulty');
  if(!diff || !diff.value){ showError(diff,'diffError'); ok=false } else hideError(diff,'diffError');

  // shift
  const shift = document.getElementById('shift');
  if(!shift || !shift.value){ showError(shift,'shiftError'); ok=false } else hideError(shift,'shiftError');

  // name
  const rep = document.getElementById('reported');
  if(!rep || !patterns.name.test(rep.value.trim())){ showError(rep,'repError'); ok=false } else hideError(rep,'repError');

  if(!ok){
    e.preventDefault();
    const firstInvalid = document.querySelector('.invalid');
    if(firstInvalid) firstInvalid.scrollIntoView({behavior:'smooth',block:'center'});
    return false;
  }
  // allow native submit to FormSubmit
});
</script>
</body>
</html>